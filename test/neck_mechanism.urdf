<?xml version="1.0" ?>
<robot name="neck_mechanism">

  <!-- ======================================== -->
  <!-- Base (fixed to world) -->
  <!-- ======================================== -->
  <link name="base_link">
    <visual>
      <!-- Base platform -->
      <origin xyz="0 0 0.01" rpy="0 0 0"/>
      <geometry>
        <box size="0.12 0.12 0.02"/>
      </geometry>
      <material name="dark_gray">
        <color rgba="0.3 0.3 0.3 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.01" rpy="0 0 0"/>
      <geometry>
        <box size="0.12 0.12 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <!-- Left servo body (visual only, fixed to base) -->
  <link name="left_servo_body">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.027 0.012 0.023"/>
      </geometry>
      <material name="servo_red">
        <color rgba="0.8 0.2 0.2 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="left_servo_fixed" type="fixed">
    <parent link="base_link"/>
    <child link="left_servo_body"/>
    <origin xyz="-0.035 0 0.035" rpy="0 0 0"/>
  </joint>

  <!-- Right servo body (visual only, fixed to base) -->
  <link name="right_servo_body">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.027 0.012 0.023"/>
      </geometry>
      <material name="servo_green">
        <color rgba="0.2 0.7 0.2 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="right_servo_fixed" type="fixed">
    <parent link="base_link"/>
    <child link="right_servo_body"/>
    <origin xyz="0.035 0 0.035" rpy="0 0 0"/>
  </joint>

  <!-- ======================================== -->
  <!-- Yaw column (from base center going up) -->
  <!-- ======================================== -->
  <link name="yaw_column">
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.008" length="0.05"/>
      </geometry>
      <material name="silver">
        <color rgba="0.7 0.7 0.7 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.05"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="yaw_joint" type="revolute">
    <parent link="base_link"/>
    <child link="yaw_column"/>
    <origin xyz="0 0 0.02" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
    <dynamics damping="0.5"/>
  </joint>

  <!-- ======================================== -->
  <!-- Left linkage rod (visual, attached to yaw_column) -->
  <!-- ======================================== -->
  <link name="left_linkage">
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.003" length="0.06"/>
      </geometry>
      <material name="rod_red">
        <color rgba="1.0 0.4 0.4 0.9"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.005"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="left_linkage_fixed" type="fixed">
    <parent link="yaw_column"/>
    <child link="left_linkage"/>
    <origin xyz="-0.02 0 0.02" rpy="0 0.3 0"/>
  </joint>

  <!-- Right linkage rod -->
  <link name="right_linkage">
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.003" length="0.06"/>
      </geometry>
      <material name="rod_green">
        <color rgba="0.4 1.0 0.4 0.9"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.005"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="right_linkage_fixed" type="fixed">
    <parent link="yaw_column"/>
    <child link="right_linkage"/>
    <origin xyz="0.02 0 0.02" rpy="0 -0.3 0"/>
  </joint>

  <!-- ======================================== -->
  <!-- Pitch platform (universal joint - pitch axis) -->
  <!-- ======================================== -->
  <link name="pitch_platform">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
      <material name="yellow">
        <color rgba="1.0 0.9 0.0 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.02"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="pitch_joint" type="revolute">
    <parent link="yaw_column"/>
    <child link="pitch_platform"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.7" upper="0.7" effort="10" velocity="3"/>
    <dynamics damping="0.3"/>
  </joint>

  <!-- ======================================== -->
  <!-- Roll platform (universal joint - roll axis) -->
  <!-- ======================================== -->
  <link name="roll_platform">
    <visual>
      <origin xyz="0 0 0.005" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.006" length="0.01"/>
      </geometry>
      <material name="orange">
        <color rgba="1.0 0.6 0.0 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.01"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="roll_joint" type="revolute">
    <parent link="pitch_platform"/>
    <child link="roll_platform"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit lower="-0.52" upper="0.52" effort="10" velocity="3"/>
    <dynamics damping="0.3"/>
  </joint>

  <!-- ======================================== -->
  <!-- Head (the payload) -->
  <!-- ======================================== -->
  <link name="head">
    <visual>
      <!-- Neck cylinder -->
      <origin xyz="0 0 0.015" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.01" length="0.03"/>
      </geometry>
      <material name="neck_color">
        <color rgba="0.9 0.8 0.7 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.05"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="head_fixed" type="fixed">
    <parent link="roll_platform"/>
    <child link="head"/>
    <origin xyz="0 0 0.005" rpy="0 0 0"/>
  </joint>

  <!-- Head sphere (skull) -->
  <link name="skull">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
      <material name="skin">
        <color rgba="0.95 0.85 0.75 0.85"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.3"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="skull_fixed" type="fixed">
    <parent link="head"/>
    <child link="skull"/>
    <origin xyz="0 0 0.06" rpy="0 0 0"/>
  </joint>

  <!-- Face direction indicator (nose) -->
  <link name="nose">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
      <material name="nose_color">
        <color rgba="1.0 0.5 0.5 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="nose_fixed" type="fixed">
    <parent link="skull"/>
    <child link="nose"/>
    <origin xyz="0 -0.04 -0.005" rpy="0 0 0"/>
  </joint>

  <!-- Left eye -->
  <link name="left_eye">
    <visual>
      <geometry>
        <sphere radius="0.007"/>
      </geometry>
      <material name="eye_white">
        <color rgba="1.0 1.0 1.0 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="left_eye_fixed" type="fixed">
    <parent link="skull"/>
    <child link="left_eye"/>
    <origin xyz="-0.015 -0.035 0.008" rpy="0 0 0"/>
  </joint>

  <!-- Right eye -->
  <link name="right_eye">
    <visual>
      <geometry>
        <sphere radius="0.007"/>
      </geometry>
      <material name="eye_white2">
        <color rgba="1.0 1.0 1.0 1"/>
      </material>
    </visual>
    <inertial>
      <mass value="0.001"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="right_eye_fixed" type="fixed">
    <parent link="skull"/>
    <child link="right_eye"/>
    <origin xyz="0.015 -0.035 0.008" rpy="0 0 0"/>
  </joint>

</robot>
